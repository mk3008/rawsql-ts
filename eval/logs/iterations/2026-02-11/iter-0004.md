# Iteration 0004

- Original iteration number: 4
- Source: eval/IMPROVEMENT_PLAN.ja.md (frozen)

* Iteration: 4
* Target item: 1. SQLカタログ単体テストの改善（ZTD / Mapping）
* Change applied: P3（`eval/runner.ts` の missing check import / export不整合を最小修正し、欠損checkは `skipped=true` で中立化）
* Expected effect: `pnpm exec ts-node eval/runner.ts ... --report ...` が TypeScript compile failure で停止せず、report を生成できる
* Observed effect:
  - 変更前 compile error（Observed）:
    - `TS2307: Cannot find module './checks/catalog_trace_quality'`
    - `TS2307: Cannot find module './checks/contract_drift'`
    - `TS2307: Cannot find module './checks/sql_composition'`
    - `TS2307: Cannot find module './checks/sql_client_runnable'`
    - `TS2724: './checks/sql_rules' has no exported member 'runSqlRulesChecks'`
  - `pnpm exec ts-node eval/runner.ts --case crud-basic --scenario crud-basic --skip-ai --report eval/reports/loop-plan-check-manual.json` で exit code 0（Observed）
  - report generated: `eval/reports/loop-plan-check-manual.json`（Observed）
* Verdict: Effective
* If Ineffective: N/A
* Proposal stack:
  - Pending:
    - P4: 一時skipしたcheck群（`sql_composition` / `sql_client_runnable` / `contract_drift` / `repository_boundary` / `catalog_trace_quality`）を実体checkへ復帰する。
  - Dropped as noise:
    - なし
  - Dropped as waste:
    - なし
* 補足（temporary無効化の妥当性/戻す条件）:
  - 妥当性: compile failure解消を最優先し、`skipped=true` で失敗扱いを避けつつ report 生成可否の観測を可能にした。
  - 戻す条件: 欠損しているcheck module（または同等の実装）を復元した時点で、`createSkippedCheck` の置換を順次撤去する。