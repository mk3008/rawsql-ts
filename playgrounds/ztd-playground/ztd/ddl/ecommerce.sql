-- EC domain: customer, product, sales order, and sales order item for ZTD practice.
CREATE TABLE customer (
  customer_id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  customer_name text NOT NULL,
  customer_email text NOT NULL,
  registered_at timestamp NOT NULL
);

CREATE TABLE product (
  product_id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  product_name text NOT NULL,
  list_price numeric NOT NULL,
  product_category_id bigint
);

CREATE TABLE sales_order (
  sales_order_id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  customer_id bigint NOT NULL REFERENCES customer (customer_id),
  sales_order_date date NOT NULL,
  sales_order_status_code int NOT NULL
);

CREATE TABLE sales_order_item (
  sales_order_item_id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  sales_order_id bigint NOT NULL REFERENCES sales_order (sales_order_id),
  product_id bigint NOT NULL REFERENCES product (product_id),
  quantity int NOT NULL,
  unit_price numeric NOT NULL
);
