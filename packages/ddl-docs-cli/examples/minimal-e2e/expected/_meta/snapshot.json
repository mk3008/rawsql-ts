[
  {
    "schema": "master",
    "table": "product",
    "schemaSlug": "master",
    "tableSlug": "product",
    "tableComment": "product master",
    "sourceFiles": [
      "packages/ddl-docs-cli/examples/minimal-e2e/ddl/master.sql"
    ],
    "columns": [
      {
        "name": "product_id",
        "concept": "product_id",
        "conceptSlug": "product-id",
        "typeName": "bigserial",
        "canonicalType": "int8",
        "typeKey": "int8{serial}",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": true,
        "comment": "",
        "checks": [],
        "unknownType": false
      },
      {
        "name": "product_code",
        "concept": "product_code",
        "conceptSlug": "product-code",
        "typeName": "text",
        "canonicalType": "text",
        "typeKey": "raw:text",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": false,
        "comment": "business product code",
        "checks": [],
        "unknownType": true
      },
      {
        "name": "product_name",
        "concept": "product_name",
        "conceptSlug": "product-name",
        "typeName": "text",
        "canonicalType": "text",
        "typeKey": "raw:text",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": false,
        "comment": "",
        "checks": [],
        "unknownType": true
      },
      {
        "name": "unit_price",
        "concept": "unit_price",
        "conceptSlug": "unit-price",
        "typeName": "int",
        "canonicalType": "int4",
        "typeKey": "int4",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": false,
        "comment": "",
        "checks": [],
        "unknownType": false
      }
    ],
    "primaryKey": [
      "product_id"
    ],
    "constraints": [
      {
        "kind": "PK",
        "name": "",
        "expression": "product_id"
      },
      {
        "kind": "UK",
        "name": "",
        "expression": "product_code"
      }
    ],
    "outgoingReferences": [],
    "incomingReferences": [
      {
        "direction": "incoming",
        "source": "suggested",
        "fromTableKey": "public.order_item",
        "targetTableKey": "master.product",
        "fromColumns": [
          "product_id"
        ],
        "targetColumns": [
          "product_id"
        ],
        "onDeleteAction": null,
        "onUpdateAction": null,
        "fromSchemaSlug": "public",
        "fromTableSlug": "order-item",
        "targetSchemaSlug": "master",
        "targetTableSlug": "product",
        "matchRule": "exact",
        "expression": "public.order_item: product_id -> master.product(product_id)"
      }
    ],
    "normalizedSql": "-- normalized: v1 dialect=postgres\ncreate table \"master\".\"product\"(\n  \"product_id\" bigserial not null,\n  \"product_code\" text not null,\n  \"product_name\" text not null,\n  \"unit_price\" int not null\n);\nalter table \"master\".\"product\"\n  add primary key(\"product_id\");\nalter table \"master\".\"product\"\n  add unique(\"product_code\");\ncomment on table \"master\".\"product\" is 'product master';\ncomment on column \"master\".\"product\".\"product_code\" is 'business product code';"
  },
  {
    "schema": "public",
    "table": "order",
    "schemaSlug": "public",
    "tableSlug": "order",
    "tableComment": "purchase order",
    "sourceFiles": [
      "packages/ddl-docs-cli/examples/minimal-e2e/ddl/public.sql"
    ],
    "columns": [
      {
        "name": "order_id",
        "concept": "order_id",
        "conceptSlug": "order-id",
        "typeName": "bigserial",
        "canonicalType": "int8",
        "typeKey": "int8{serial}",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": true,
        "comment": "",
        "checks": [],
        "unknownType": false
      },
      {
        "name": "user_id",
        "concept": "user_id",
        "conceptSlug": "user-id",
        "typeName": "bigint",
        "canonicalType": "int8",
        "typeKey": "int8",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": false,
        "comment": "",
        "checks": [],
        "unknownType": false
      },
      {
        "name": "total_amount",
        "concept": "total_amount",
        "conceptSlug": "total-amount",
        "typeName": "numeric",
        "canonicalType": "numeric",
        "typeKey": "numeric",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": false,
        "comment": "",
        "checks": [],
        "unknownType": false
      },
      {
        "name": "created_at",
        "concept": "created_at",
        "conceptSlug": "created-at",
        "typeName": "timestamptz",
        "canonicalType": "timestamptz",
        "typeKey": "timestamptz",
        "nullable": true,
        "defaultValue": "now()",
        "isPrimaryKey": false,
        "comment": "",
        "checks": [],
        "unknownType": false
      }
    ],
    "primaryKey": [
      "order_id"
    ],
    "constraints": [
      {
        "kind": "CHECK",
        "name": "order_total_chk",
        "expression": "\"total_amount\" >= 0"
      },
      {
        "kind": "PK",
        "name": "",
        "expression": "order_id"
      }
    ],
    "outgoingReferences": [
      {
        "direction": "outgoing",
        "source": "suggested",
        "fromTableKey": "public.order",
        "targetTableKey": "public.user",
        "fromColumns": [
          "user_id"
        ],
        "targetColumns": [
          "user_id"
        ],
        "onDeleteAction": null,
        "onUpdateAction": null,
        "fromSchemaSlug": "public",
        "fromTableSlug": "order",
        "targetSchemaSlug": "public",
        "targetTableSlug": "user",
        "matchRule": "exact",
        "expression": "user_id -> public.user(user_id)"
      }
    ],
    "incomingReferences": [
      {
        "direction": "incoming",
        "source": "ddl",
        "fromTableKey": "public.order_item",
        "targetTableKey": "public.order",
        "fromColumns": [
          "order_id"
        ],
        "targetColumns": [
          "order_id"
        ],
        "onDeleteAction": "cascade",
        "onUpdateAction": null,
        "fromSchemaSlug": "public",
        "fromTableSlug": "order-item",
        "targetSchemaSlug": "public",
        "targetTableSlug": "order",
        "expression": "public.order_item: order_id -> public.order(order_id)"
      }
    ],
    "normalizedSql": "-- normalized: v1 dialect=postgres\ncreate table \"public\".\"order\"(\n  \"order_id\" bigserial not null,\n  \"user_id\" bigint not null,\n  \"total_amount\" numeric not null,\n  \"created_at\" timestamptz default now()\n);\nalter table \"public\".\"order\"\n  add constraint \"order_total_chk\" check(\"total_amount\" >= 0);\nalter table \"public\".\"order\"\n  add primary key(\"order_id\");\ncomment on table \"public\".\"order\" is 'purchase order';"
  },
  {
    "schema": "public",
    "table": "order_item",
    "schemaSlug": "public",
    "tableSlug": "order-item",
    "tableComment": "",
    "sourceFiles": [
      "packages/ddl-docs-cli/examples/minimal-e2e/ddl/public.sql"
    ],
    "columns": [
      {
        "name": "order_item_id",
        "concept": "order_item_id",
        "conceptSlug": "order-item-id",
        "typeName": "bigserial",
        "canonicalType": "int8",
        "typeKey": "int8{serial}",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": true,
        "comment": "",
        "checks": [],
        "unknownType": false
      },
      {
        "name": "order_id",
        "concept": "order_id",
        "conceptSlug": "order-id",
        "typeName": "bigint",
        "canonicalType": "int8",
        "typeKey": "int8",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": false,
        "comment": "order identifier",
        "checks": [],
        "unknownType": false
      },
      {
        "name": "product_id",
        "concept": "product_id",
        "conceptSlug": "product-id",
        "typeName": "bigint",
        "canonicalType": "int8",
        "typeKey": "int8",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": false,
        "comment": "",
        "checks": [],
        "unknownType": false
      },
      {
        "name": "product_code",
        "concept": "product_code",
        "conceptSlug": "product-code",
        "typeName": "text",
        "canonicalType": "text",
        "typeKey": "raw:text",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": false,
        "comment": "",
        "checks": [],
        "unknownType": true
      },
      {
        "name": "quantity",
        "concept": "quantity",
        "conceptSlug": "quantity",
        "typeName": "int",
        "canonicalType": "int4",
        "typeKey": "int4",
        "nullable": false,
        "defaultValue": "1",
        "isPrimaryKey": false,
        "comment": "",
        "checks": [],
        "unknownType": false
      },
      {
        "name": "unit_price",
        "concept": "unit_price",
        "conceptSlug": "unit-price",
        "typeName": "numeric",
        "canonicalType": "numeric",
        "typeKey": "numeric",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": false,
        "comment": "",
        "checks": [],
        "unknownType": false
      }
    ],
    "primaryKey": [
      "order_item_id"
    ],
    "constraints": [
      {
        "kind": "CHECK",
        "name": "order_item_qty_chk",
        "expression": "\"quantity\" > 0"
      },
      {
        "kind": "FK",
        "name": "order_item_order_fk",
        "expression": "order_id -> public.order(order_id) ON DELETE CASCADE"
      },
      {
        "kind": "PK",
        "name": "",
        "expression": "order_item_id"
      },
      {
        "kind": "UK",
        "name": "order_item_order_product_uk",
        "expression": "order_id, product_id"
      }
    ],
    "outgoingReferences": [
      {
        "direction": "outgoing",
        "source": "ddl",
        "fromTableKey": "public.order_item",
        "targetTableKey": "public.order",
        "fromColumns": [
          "order_id"
        ],
        "targetColumns": [
          "order_id"
        ],
        "onDeleteAction": "cascade",
        "onUpdateAction": null,
        "fromSchemaSlug": "public",
        "fromTableSlug": "order-item",
        "targetSchemaSlug": "public",
        "targetTableSlug": "order",
        "expression": "order_id -> public.order(order_id)"
      },
      {
        "direction": "outgoing",
        "source": "suggested",
        "fromTableKey": "public.order_item",
        "targetTableKey": "master.product",
        "fromColumns": [
          "product_id"
        ],
        "targetColumns": [
          "product_id"
        ],
        "onDeleteAction": null,
        "onUpdateAction": null,
        "fromSchemaSlug": "public",
        "fromTableSlug": "order-item",
        "targetSchemaSlug": "master",
        "targetTableSlug": "product",
        "matchRule": "exact",
        "expression": "product_id -> master.product(product_id)"
      }
    ],
    "incomingReferences": [
      {
        "direction": "incoming",
        "source": "ddl",
        "fromTableKey": "public.order_item_snapshot",
        "targetTableKey": "public.order_item",
        "fromColumns": [
          "order_id",
          "product_id"
        ],
        "targetColumns": [
          "order_id",
          "product_id"
        ],
        "onDeleteAction": null,
        "onUpdateAction": null,
        "fromSchemaSlug": "public",
        "fromTableSlug": "order-item-snapshot",
        "targetSchemaSlug": "public",
        "targetTableSlug": "order-item",
        "expression": "public.order_item_snapshot: order_id, product_id -> public.order_item(order_id, product_id)"
      }
    ],
    "normalizedSql": "-- normalized: v1 dialect=postgres\ncreate table \"public\".\"order_item\"(\n  \"order_item_id\" bigserial not null,\n  \"order_id\" bigint not null,\n  \"product_id\" bigint not null,\n  \"product_code\" text not null,\n  \"quantity\" int not null default 1,\n  \"unit_price\" numeric not null\n);\nalter table \"public\".\"order_item\"\n  add constraint \"order_item_qty_chk\" check(\"quantity\" > 0);\nalter table \"public\".\"order_item\"\n  add constraint \"order_item_order_fk\" foreign key(\"order_id\") references \"public\".\"order\"(\"order_id\") on delete cascade;\nalter table \"public\".\"order_item\"\n  add primary key(\"order_item_id\");\nalter table \"public\".\"order_item\"\n  add constraint \"order_item_order_product_uk\" unique(\"order_id\",\n  \"product_id\");\ncomment on column \"public\".\"order_item\".\"order_id\" is 'order identifier';"
  },
  {
    "schema": "public",
    "table": "order_item_snapshot",
    "schemaSlug": "public",
    "tableSlug": "order-item-snapshot",
    "tableComment": "",
    "sourceFiles": [
      "packages/ddl-docs-cli/examples/minimal-e2e/ddl/public.sql"
    ],
    "columns": [
      {
        "name": "order_id",
        "concept": "order_id",
        "conceptSlug": "order-id",
        "typeName": "bigint",
        "canonicalType": "int8",
        "typeKey": "int8",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": true,
        "comment": "",
        "checks": [],
        "unknownType": false
      },
      {
        "name": "product_id",
        "concept": "product_id",
        "conceptSlug": "product-id",
        "typeName": "bigint",
        "canonicalType": "int8",
        "typeKey": "int8",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": true,
        "comment": "",
        "checks": [],
        "unknownType": false
      },
      {
        "name": "snapshot_note",
        "concept": "snapshot_note",
        "conceptSlug": "snapshot-note",
        "typeName": "text",
        "canonicalType": "text",
        "typeKey": "raw:text",
        "nullable": true,
        "defaultValue": "",
        "isPrimaryKey": false,
        "comment": "",
        "checks": [],
        "unknownType": true
      }
    ],
    "primaryKey": [
      "order_id",
      "product_id"
    ],
    "constraints": [
      {
        "kind": "FK",
        "name": "order_item_snapshot_item_fk",
        "expression": "order_id, product_id -> public.order_item(order_id, product_id)"
      },
      {
        "kind": "PK",
        "name": "order_item_snapshot_pk",
        "expression": "order_id, product_id"
      }
    ],
    "outgoingReferences": [
      {
        "direction": "outgoing",
        "source": "ddl",
        "fromTableKey": "public.order_item_snapshot",
        "targetTableKey": "public.order_item",
        "fromColumns": [
          "order_id",
          "product_id"
        ],
        "targetColumns": [
          "order_id",
          "product_id"
        ],
        "onDeleteAction": null,
        "onUpdateAction": null,
        "fromSchemaSlug": "public",
        "fromTableSlug": "order-item-snapshot",
        "targetSchemaSlug": "public",
        "targetTableSlug": "order-item",
        "expression": "order_id, product_id -> public.order_item(order_id, product_id)"
      }
    ],
    "incomingReferences": [],
    "normalizedSql": "-- normalized: v1 dialect=postgres\ncreate table \"public\".\"order_item_snapshot\"(\n  \"order_id\" bigint not null,\n  \"product_id\" bigint not null,\n  \"snapshot_note\" text\n);\nalter table \"public\".\"order_item_snapshot\"\n  add constraint \"order_item_snapshot_item_fk\" foreign key(\"order_id\",\n  \"product_id\") references \"public\".\"order_item\"(\"order_id\",\n  \"product_id\");\nalter table \"public\".\"order_item_snapshot\"\n  add constraint \"order_item_snapshot_pk\" primary key(\"order_id\",\n  \"product_id\");"
  },
  {
    "schema": "public",
    "table": "user",
    "schemaSlug": "public",
    "tableSlug": "user",
    "tableComment": "application user",
    "sourceFiles": [
      "packages/ddl-docs-cli/examples/minimal-e2e/ddl/public.sql"
    ],
    "columns": [
      {
        "name": "user_id",
        "concept": "user_id",
        "conceptSlug": "user-id",
        "typeName": "bigserial",
        "canonicalType": "int8",
        "typeKey": "int8{serial}",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": true,
        "comment": "",
        "checks": [],
        "unknownType": false
      },
      {
        "name": "email",
        "concept": "email",
        "conceptSlug": "email",
        "typeName": "text",
        "canonicalType": "text",
        "typeKey": "raw:text",
        "nullable": false,
        "defaultValue": "",
        "isPrimaryKey": false,
        "comment": "login mail address",
        "checks": [],
        "unknownType": true
      },
      {
        "name": "age",
        "concept": "age",
        "conceptSlug": "age",
        "typeName": "int",
        "canonicalType": "int4",
        "typeKey": "int4",
        "nullable": true,
        "defaultValue": "",
        "isPrimaryKey": false,
        "comment": "",
        "checks": [],
        "unknownType": false
      },
      {
        "name": "created_at",
        "concept": "created_at",
        "conceptSlug": "created-at",
        "typeName": "timestamptz",
        "canonicalType": "timestamptz",
        "typeKey": "timestamptz",
        "nullable": true,
        "defaultValue": "now()",
        "isPrimaryKey": false,
        "comment": "",
        "checks": [],
        "unknownType": false
      }
    ],
    "primaryKey": [
      "user_id"
    ],
    "constraints": [
      {
        "kind": "CHECK",
        "name": "user_age_chk",
        "expression": "\"age\" > 0"
      },
      {
        "kind": "PK",
        "name": "",
        "expression": "user_id"
      }
    ],
    "outgoingReferences": [],
    "incomingReferences": [
      {
        "direction": "incoming",
        "source": "suggested",
        "fromTableKey": "public.order",
        "targetTableKey": "public.user",
        "fromColumns": [
          "user_id"
        ],
        "targetColumns": [
          "user_id"
        ],
        "onDeleteAction": null,
        "onUpdateAction": null,
        "fromSchemaSlug": "public",
        "fromTableSlug": "order",
        "targetSchemaSlug": "public",
        "targetTableSlug": "user",
        "matchRule": "exact",
        "expression": "public.order: user_id -> public.user(user_id)"
      }
    ],
    "normalizedSql": "-- normalized: v1 dialect=postgres\ncreate table \"public\".\"user\"(\n  \"user_id\" bigserial not null,\n  \"email\" text not null,\n  \"age\" int,\n  \"created_at\" timestamptz default now()\n);\nalter table \"public\".\"user\"\n  add constraint \"user_age_chk\" check(\"age\" > 0);\nalter table \"public\".\"user\"\n  add primary key(\"user_id\");\ncomment on table \"public\".\"user\" is 'application user';\ncomment on column \"public\".\"user\".\"email\" is 'login mail address';"
  }
]
