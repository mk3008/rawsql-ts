{
  "schemaVersion": 1,
  "mode": "specification",
  "summary": {
    "sqlCatalogCount": 0,
    "sqlCaseCatalogCount": 2,
    "testCaseCount": 4,
    "specFilesScanned": 0,
    "testFilesScanned": 1
  },
  "sqlCatalogs": [],
  "sqlCaseCatalogs": [
    {
      "id": "sql.active-orders",
      "title": "Active orders SQL semantics",
      "definitionPath": "src/specs/sql/activeOrders.catalog.ts",
      "params": {
        "shape": "named",
        "example": {
          "active": 1,
          "minTotal": 20,
          "limit": 2
        }
      },
      "output": {
        "mapping": {
          "columnMap": {
            "orderId": "order_id",
            "orderTotal": "order_total",
            "userEmail": "user_email"
          }
        }
      },
      "sql": "\n      SELECT\n        o.id AS order_id,\n        u.email AS user_email,\n        o.total AS order_total\n      FROM orders o\n      INNER JOIN users u ON u.id = o.user_id\n      WHERE u.active = @active\n        AND o.total >= @minTotal\n      ORDER BY o.total DESC\n      LIMIT @limit\n    ",
      "fixtures": [
        {
          "tableName": "orders",
          "schema": {
            "columns": {
              "id": "INTEGER",
              "total": "INTEGER",
              "user_id": "INTEGER"
            }
          },
          "rowsCount": 4
        },
        {
          "tableName": "users",
          "schema": {
            "columns": {
              "active": "INTEGER",
              "email": "TEXT",
              "id": "INTEGER"
            }
          },
          "rowsCount": 3
        }
      ],
      "cases": [
        {
          "id": "baseline",
          "title": "active users with minimum total",
          "params": {
            "active": 1,
            "limit": 2,
            "minTotal": 20
          },
          "expected": [
            {
              "orderId": 10,
              "userEmail": "alice@example.com",
              "orderTotal": 50
            },
            {
              "orderId": 13,
              "userEmail": "carol@example.com",
              "orderTotal": 35
            }
          ]
        },
        {
          "id": "inactive-variant",
          "title": "inactive users return a different result",
          "params": {
            "active": 0,
            "limit": 2,
            "minTotal": 20
          },
          "expected": [
            {
              "orderId": 12,
              "userEmail": "bob@example.com",
              "orderTotal": 40
            }
          ]
        }
      ]
    },
    {
      "id": "sql.sample",
      "title": "sample sql cases",
      "definitionPath": "src/specs/sql/usersList.catalog.ts",
      "params": {
        "shape": "named",
        "example": {
          "active": 1
        }
      },
      "output": {
        "mapping": {
          "columnMap": {
            "id": "id"
          }
        }
      },
      "sql": "select id from users where active = :active",
      "fixtures": [
        {
          "tableName": "users",
          "schema": {
            "columns": {
              "active": "INTEGER",
              "id": "INTEGER"
            }
          },
          "rowsCount": 2
        }
      ],
      "cases": [
        {
          "id": "returns-active-users",
          "title": "returns active users",
          "params": {
            "active": 1
          },
          "expected": [
            {
              "id": 1
            }
          ]
        },
        {
          "id": "returns-inactive-users-when-active-0",
          "title": "returns inactive users when active=0",
          "params": {
            "active": 0
          },
          "expected": [
            {
              "id": 2
            }
          ]
        }
      ]
    }
  ],
  "testCaseCatalogs": [
    {
      "id": "unit.alpha",
      "title": "alpha",
      "definitionPath": "tests/specs/testCaseCatalogs.ts",
      "cases": [
        {
          "id": "a",
          "title": "noop",
          "input": 1,
          "output": 1
        }
      ]
    },
    {
      "id": "unit.normalize-email",
      "title": "normalizeEmail",
      "description": "Executable, inference-free specification for internal normalization behavior.",
      "definitionPath": "tests/specs/testCaseCatalogs.ts",
      "cases": [
        {
          "id": "keeps-valid-address",
          "title": "retains already-normalized email",
          "input": "alice@example.com",
          "output": "alice@example.com"
        },
        {
          "id": "rejects-invalid-input",
          "title": "throws when @ is missing",
          "input": "invalid-email",
          "output": "Error: invalid email"
        },
        {
          "id": "trims-and-lowercases",
          "title": "normalizes uppercase + spaces",
          "input": "  USER@Example.COM ",
          "output": "user@example.com"
        }
      ]
    }
  ],
  "testCases": [
    {
      "kind": "test-case",
      "id": "unit.alpha.a",
      "catalogId": "unit.alpha",
      "caseId": "a",
      "filePath": "tests/specs/index",
      "title": "noop"
    },
    {
      "kind": "test-case",
      "id": "unit.normalize-email.keeps-valid-address",
      "catalogId": "unit.normalize-email",
      "caseId": "keeps-valid-address",
      "filePath": "tests/specs/index",
      "title": "retains already-normalized email"
    },
    {
      "kind": "test-case",
      "id": "unit.normalize-email.rejects-invalid-input",
      "catalogId": "unit.normalize-email",
      "caseId": "rejects-invalid-input",
      "filePath": "tests/specs/index",
      "title": "throws when @ is missing"
    },
    {
      "kind": "test-case",
      "id": "unit.normalize-email.trims-and-lowercases",
      "catalogId": "unit.normalize-email",
      "caseId": "trims-and-lowercases",
      "filePath": "tests/specs/index",
      "title": "normalizes uppercase + spaces"
    }
  ]
}
